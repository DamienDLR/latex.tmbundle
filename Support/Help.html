<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 1st September 2004), see www.w3.org">

  <title>A Short Guide to the TextMate LaTeX Bundle</title>
</head>

<body>
  <h1>A Short Guide to the Mysteries of the LaTeX Bundle</h1>

  <h2>Intro</h2>

  <p>The LaTeX Bundle has a long history, it was one of the
  earliest contributed bundles in the TextMate family. Many people
  have contributed to this bundle over the short life of TextMate.
  Those people are documented in the credits section based on the
  now defunct history file and what can be gleaned from the
  subversion logs and mailing list. Since there are several ways to
  use the LaTeX bundle and several different distributions of TeX
  out there for the Mac now seems like as good a time as any to
  document some of the prerequisites and options.</p>

  <p>First, you need a working version of LaTeX. Some of the
  commands in the bundle assume that you are using the latest
  version that you can get using the i-installer package. You
  should use the 2005 install package from Gerben's
  i-Directory.</p>

  <p>Several of the commands also assume that you have some kind of
  pdf previewer. There are four options:</p>

  <ol>
    <li>The HTML output window of TextMate </li>

    <li>The TeXShop Application</li>

    <li>The TeXniscope previewer</li>

    <li>Apple's Preview.app</li>
  </ol>

  <p>Some of the previewers, TeXniscope and TeXShop work with the
  pdfsync package. The pdf sync package is a great because it
  allows you to easily hop back and forth between TextMate and the
  pdf version of your document</p>

  <p>The LaTeX bundle also works well with bibtex. In particular
  the Bibdesk application for managing bibliography files works
  well with TextMate.</p>

  <p>Spell Checking: The system spell check service works find with
  LaTeX but is a bit annoying since it will mark all the various
  LaTeX commands as misspelled. However, you can install CocoAspell
  which works as another system dictionary and is able to filter
  out LaTeX commands.</p>
  
  <p><em><strong>Note:</strong> since 1.1b12 (or around that time), spell checking should no longer be applied to LaTeX reserved keywords. There still is a problem with spell checking in math environments (because the constructs there aren't always marked up as an entity for which spell checking is disabled).</em></p>

  <p>You can find all of the above on Version Tracker and the
  like.</p>

  <p>The rest of this document is broken into six sections. There
  is a section for each of the following: Commands, Macros,
  Snippets, Templates, Environment Variables, and Credits. Happy
  LaTeXing</p>

  <h2>Commands</h2>

  <dl>
    <dt><strong>Typeset &amp; View</strong> [⌘-B]</dt>

    <dd>typeset the current project to a temporary directory and
    display LaTeX output in the TextMate HTML output window (requires PDF Browser Plugin or Tiger (?) to display the resulting PDF) The typeset document will appear using your preferred viewer. 
          If you are a TeXniscope user you can
          configure TextMate to be your external editor in the prefs
          panel for TeXniscope. You should set the options as
          follows (assumes you have <tt>mate</tt> installed, see Help &#x2192; Terminal Usage… if you haven't):<br>
          <pre>
        Editor: mate
        Editor options: %file -l %line

        </pre>
    If you are using TeXniscope you can make use of the pdfsync
    package. \usepackage{pdfsync} in you LaTeX document. This allows
    you to quickly navigate back and forth between the source and the
    preview window. Command-clicking in the preview window brings you
    to the correct line in your source file.
    
    </dd>


    <dt><strong>LaTeX Tidy:</strong> [⌘-⌥-⇧-l]</dt>

    <dd>Reformats your LaTeX code to be neat and tidy.</dd>

    <dt><strong>Trash aux Files:</strong> [^-⌥-⌫]</dt>

    <dd>Clean up your directory by removing all the auxiliary files generated by Latex</dd>

    <dt><strong>Show Labels</strong> [⌥-⎋]</dt>
    <dd>Popup a dialog box with the list of defined labels to select from.  Selecting a label inserts it at the cursor.  This is a nice way to quickly find a label to use with a \ref.</dd>

    <dt><strong>Find in TeXniscope:</strong> [^-⌥-⌘-o]</dt>

    <dd>Again, if you are using the pdfsync package this command
    will bring you to the preview window where the current line of
    source is displayed.</dd>

    <dt><strong>BibDesk completion:</strong> [⌥-esc]</dt>

    <dd>Searches in open bibliography files for the current word
    and replaces the current word with the appropriate cite
    key.</dd>
    
    <dt><strong>Run BibTeX</strong></dt>
    
    <dt><strong>Run Makeindex</strong></dt>
  </dl>

  <h2>Macros</h2>

  <dl>
      <dt><strong>Insert Environment/Command Based on Current Word</strong>[^-&lt;]</dt>
      <dd>This is one of the most useful LaTeX commands.  Not only can you quickly create any kind of  begin/end environment such as itemize, equation, verbatim, etc. But the command also completes many common latex formatting commands such as \textit{}, \textbf{}, \ref{}, etc. This command can now be customized be the user through environment variables, defined via the Advanced Tab in the Preferences. There are two relevant variables: TM_LATEX_SHORTCUTS and TM_LATEX_COMMANDS. See the Environment Variables section for more details.</dd>
      <dt><strong>Generic Completion:</strong> [^-cmd-space]</dt>

    <dd>This macro actually consists of a bunch of perl scripts
    that get run to do completion on bib entries, cross-refs and
    commands. It is context sensitive and makes its best guess
    based on context as to what you are trying to accomplish.</dd>
  </dl>
    <dt><strong>Add Word to Index</strong>[⌃-⇧-i]</dt>
    <dt><strong>Make Current Word TT</strong>[^-⇧-c]</dt>

  <h2>Drag and Drop</h2>
  <p>There are two drag and drop thingies that work well in LaTeX.  You can drag an image file in to the document and have it surrounded by by a complete figure environment.  You can also drag in another .tex file to have that file added to your document with an \include command.</p>
  
  <h2>Snippets</h2>Many of the snippets that used to exist in the LaTeX bundle have been made obsolete by simpler commands such as the Insert Begin/End pair.

  <ul>

    <li>Table [Table]</li>

    <li>Figure [Fig]</li>

    <li>Code listing (lstlisting) [lst]</li>

    <li>Code listing inline (lstinline) [li]</li>

    <li>Wrap Selection in Command [⌃-⇧-w]: Makes it easy to
    wrap the selected text with \textbf, \textit, or \texttt</li>
    
    <li>section, subsection, et. al. [sec, sub, ssub]</li>
    
    <li>Wrap in Left Right () [⌃-⇧-l]</li>

    <li>Lines to List Environment [⌃-⇧-l]: Wrap the selected group
    of lines inside a list
    environment(enumerate,itemize,description). Each non-blank line
    becomes an \item in the environment. If the first 20 characters
    of the line contain a : it is assumed that the environment will
    be a description environment and all the characters up to the :
    are placed inside left/right brackets.</li>
    </ul>
    <li>Beamer Frames [frame]  Make a begin/end frame if you are using Beamer...</li>
    
    <li>Here is a list of existing snippets that could also be replaced  by the use of completion and
        the Begin/end pair command</li>
    <ul>
        <li>\textit  [it]</li>
        <li>\textbf [bf]</li>
        <li>\texttt [tt]</li>
        <li>\emph [em]</li>        
        <li>\frac [fr]</li>
        <li>\item [enter]</li>
        <li>\item for description [itd]</li>
        <li>\footnote [foot]</li>
        <li>\cite [cite]</li>
        <li>\ref  [ref]</li>
    </ul>
    
  <h2>Completions</h2>
  <p>The following words are known to be in  the list of completions (accessed through escape) that LaTeX knows about:</p>
      <ul>
          <li>corollary</li>
          <li>definition</li>
          <li>description</li>
          <li>enumerate</li>
          <li>equation</li>
          <li>itemize</li>
          <li>lemma</li>
          <li>proof</li>
          <li>proposition</li>
          <li>verbatim</li> 
      </ul>
  <h2>Templates</h2>

  <dl>
    <dt>Article</dt>

    <dd>Sets up a single file article document. Includes lots of
    nice packages for graphics, math, code listings, table of
    contents, etc.</dd>
    <dt>Exam</dt>

    <dd>Sets up a single file exam document.  If you write exams in LaTeX this is the template for you. Includes lots of nice packages for graphics, math, code listings, table of
    contents, etc.</dd>
  </dl>

  <h2>Environment Variables</h2>

  <dl>
    <dt>TM_LATEX_MASTER</dt>
    <dd><p>If set this variable contains the filename of a LaTeX file that includes other LaTeX files to create a larger work. If not set, this variable defaults to TM_FILEPATH</p></dd>

    <dt>TM_TSCOPE</dt>
    <dd><p>If set this variable contains the path to the TeXniscope application. If not set it defaults to /Applications</p></dd>

    <dt>PDFTEX_FILE_LOCATION</dt>
    <dd><p>The PDF LaTeX command currently needs to go through http to display the PDF inline. This is done by copying the file to a place where apache can find it and redirecting to that file using http://localhost/. It defaults to ~/Sites</p></dd>

    <dt>PDFTEX_WEB_LOCATION</dt>
    <dd><p>This is how the generated PDF should be accessed (see PDFTEX_FILE_LOCATION). It defaults to http://localhost/~$USER</p></dd>    

    <dt>TM_LATEX_ERRLVL</dt>
    <dd><p>Sets the error level of the latex command to check for.  If the error level is sufficiently low, then the html output window will be closed before the preview window is open.  If there are errors or warnings then the preview window stays around.  Some may want to have the preview window dissapear on warnings also, thus we have this variable.</p></dd>

    <dt>TM_LATEX_COMPILER</dt>
    <dd><p>There are two main values for this command pdflatex or latexmk.pl.  pdflatex runs the normal pdflatex command against the current file, or TM_LATEX_MASTER sending the output of one pass to the html output window.  latexmk.pl  is essentially like ant (or make) for latex.  It will run pdflatex, bibtex, and/or makeindex as many times as needed to get a clean pdf file free from missing references, bibliography entries or index entries.</p></dd>
    
    <dt>TM_LATEX_VIEWER</dt>
    <dd><p>Possible values for this are:  html (default), texniscope, preview.  See advanced notes on using Texniscope above.</p></dd>

    <dt>TM_LATEX_INSERT_LABEL</dt>
    <dd><p>If you want the automatically generated begin/end environments to contain a label then you should set this to 1.</p></dd>

    <dt>TM_LATEX_SHORTCUTS</dt>
    <dd><p>This is used by the "Insert Environment/Command..." command to perform expansion before processing the current word. It is supposed to be a comma separated list of pairs of the form short=&gt;long where "short" is the shortcut, and "long" is its expansion. So for instance if this variable has the value "item=&gt;itemize,enum=&gt;enumerate", then executing the command with current word "item" will produce an itemize environment. Note: Some shortcuts are already performed by the command, e.g. it=&gt;textit</p></dd>

    <dt>TM_LATEX_COMMANDS</dt>
    <dd><p>This is used by the "Insert Environment/Command..." command to decide whether to expand as a command or as an environment. It is a regular expression matched against the current word after it has been expanded using TM_LATEX_SHORTCUTS. Note: Some commands are already implemented, e.g. text(it|rm|sl|sc|sf)|cite.</p></dd>

</dl>
  
  <h2>Related Commands</h2>

  <dl>
    <dt>Toggle Comment [cmd-/] (Source bundle)</dt>

    <dd>The Toggle Comment command toggles line comments for
    selected lines of text.</dd>
  </dl>

  <h2>Credits</h2>There were at least two or possibly three
  versions of a LaTeX bundle floating around in the early days of
  TextMate by (I think): Normand Mousseau, Gaetan Le Guelvouit and
  Andrew Ellis At some point, January 2005, Eric Hsu pulled
  together the threads into one package. From then on there have
  been contributions by Sune Foldager, Brad Miller, Allan Odgaard,
  and Jeroen van der Ham. The Generic Completion package was
  written by Marcin.

  <h2>TODO</h2>

  <ul>
    <li>Once the new Syntax and Scope system is in place it would
    be good to rethink some of the keyboard shortcuts.</li>
  </ul>
</body>
</html>
