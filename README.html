<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 1st September 2004), see www.w3.org">

  <title>A Short Guide to the TextMate LaTeX Bundle</title>
</head>

<body>
  <h1>A Short Guide to the Mysteries of the LaTeX Bundle</h1>

  <h2>Intro</h2>

  <p>The LaTeX Bundle has a long history, it was one of the
  earliest contributed bundles in the TextMate family. Many people
  have contributed to this bundle over the short life of TextMate.
  Those people are documented in the credits section based on the
  now defunct history file and what can be gleaned from the
  subversion logs and mailing list. Since there are several ways to
  use the LaTeX bundle and several different distributions of TeX
  out there for the Mac now seems like as good a time as any to
  document some of the prerequisites and options.</p>

  <p>First, you need a working version of LaTeX. Some of the
  commands in the bundle assume that you are using the latest
  version that you can get using the i-installer package. You
  should use the 2005 install package from Gerben's
  i-Directory.</p>

  <p>Several of the commands also assume that you have some kind of
  pdf previewer. There are four options:</p>

  <ol>
    <li>The HTML output window of TextMate </li>

    <li>The TeXShop Application</li>

    <li>The TeXniscope previewer</li>

    <li>Apple's Preview.app</li>
  </ol>

  <p>Some of the previewers, TeXniscope and TeXShop work with the
  pdfsync package. The pdf sync package is a great because it
  allows you to easily hop back and forth between TextMate and the
  pdf version of your document</p>

  <p>The LaTeX bundle also works well with bibtex. In particular
  the Bibdesk application for managing bibliography files works
  well with TextMate.</p>

  <p>Spell Checking: The system spell check service works find with
  LaTeX but is a bit annoying since it will mark all the various
  LaTeX commands as misspelled. However, you can install CocoAspell
  which works as another system dictionary and is able to filter
  out LaTeX commands.</p>

  <p>You can find all of the above on Version Tracker and the
  like.</p>

  <p>The rest of this document is broken into six sections. There
  is a section for each of the following: Commands, Macros,
  Snippets, Templates, Environment Variables, and Credits. Happy
  LaTeXing</p>

  <h2>Commands</h2>

  <dl>
    <dt><strong>Typeset &amp; View</strong> [⌘-B]</dt>

    <dd>typeset the current project to a temporary directory and
    display LaTeX output in the TextMate HTML output window (requires PDF Browser Plugin or Tiger (?) to display the resulting PDF) The typeset document will appear using your preferred viewer. 
          If you are a TeXniscope user you can
          configure TextMate to be your external editor in the prefs
          panel for TeXniscope. You should set the options as
          follows:<br>
          <pre>
        Editor: open
        Editor options: "txmt://open?url=file://%file&amp;line=%line" 

        </pre>
    If you are using TeXniscope you can make use of the pdfsync
    package. \usepackage{pdfsync} in you LaTeX document. This allows
    you to quickly navigate back and forth between the source and the
    preview window. Command-clicking in the preview window brings you
    to the correct line in your source file.
    
    </dd>


    <dt><strong>LaTeX Tidy:</strong> [⌘-⌥-⇧-l]</dt>

    <dd>Reformats your LaTeX code to be neat and tidy.</dd>

    <dt><strong>Trash aux Files:</strong> [^-⌥-⌫]</dt>

    <dd>Clean up your directory by removing all the auxiliary files generated by Latex</dd>

    <dt><strong>Show Labels</strong> [⌥-⎋]</dt>
    <dd>Popup a dialog box with the list of defined labels to select from.  Selecting a label inserts it at the cursor.  This is a nice way to quickly find a label to use with a \ref.</dd>

    <dt><strong>Find in TeXniscope:</strong> [^-⌥-⌘-o]</dt>

    <dd>Again, if you are using the pdfsync package this command
    will bring you to the preview window where the current line of
    source is displayed.</dd>

    <dt><strong>BibDesk completion:</strong> [⌥-esc]</dt>

    <dd>Searches in open bibliography files for the current word
    and replaces the current word with the appropriate cite
    key.</dd>
    
    <dt><strong>Run BibTeX</strong></dt>
    
    <dt><strong>Run Makeindex</strong></dt>
  </dl>

  <h2>Macros</h2>

  <dl>
      <dt><strong>Insert Begin/End Pair</strong>[^-&lt;]</dt>
      <dd><This is one of the most useful LaTeX commands.  Not only can you quickly create any kind of  begin/end environment such as itemize, equation, verbatim, etc. But the command also completes many common latex formatting commands such as \textit{}, \textbf{}, \ref{}, etc. </dd>
      <dt><strong>Generic Completion:</strong> [^-cmd-space]</dt>

    <dd>This macro actually consists of a bunch of perl scripts
    that get run to do completion on bib entries, cross-refs and
    commands. It is context sensitive and makes its best guess
    based on context as to what you are trying to accomplish.</dd>
  </dl>
    <dt><strong>Add Word to Index</strong>[^-&lt;]</dt>
    <dt><strong>Make Current Word TT</strong>[^-⇧-C]</dt>
    <dt><strong>Make Current Word BF</strong>[^-⇧-W]</dt>            

  <h2>Drag and Drop</h2>
  <p>There are two drag and drop thingies that work well in LaTeX.  You can drag an image file in to the document and have it surrounded by by a complete figure environment.  You can also drag in another .tex file to have that file added to your document with an \include command.</p>
  
  <h2>Snippets</h2>Many of the snippets that used to exist in the LaTeX bundle have been made obsolete by simpler commands such as the Insert Begin/End pair.

  <ul>

    <li>Table [Table]</li>

    <li>Figure [Fig]</li>

    <li>Code listing (lstlisting) [lst]</li>

    <li>Code listing inline (lstinline) [li]</li>

    <li>Change Latex Style of selection [^-sh-w]: Makes it easy to
    wrap the selected text with \textbf, \textit, or \texttt</li>
    
    <li>section, subsection, et. al.</li>
    
    <li>Wrap in Left Right ()</li>

    <li>Lines to List Environment [^-sh-l]: Wrap the selected group
    of lines inside a list
    environment(enumerate,itemize,description). Each non-blank line
    becomes an \item in the environment. If the first 20 characters
    of the line contain a : it is assumed that the environment will
    be a description environment and all the characters up to the :
    are placed inside left/right brackets.</li>
    </ul>
    
    <li>Here is a list of existing snippets that could also be replaced  by the use of completion and
        the Begin/end pair command</li>
    <ul>
        <li>\textit</li>
        <li>\textbf</li>
        <li>\texttt</li>
        <li>\frac</li>
        <li>\item</li>
        <li>\item for descriptor</li>
        <li>\footnote</li>
        <li>\cite</li>
        <li>\ref</li>
        <li>
    </ul>
    
  <h2>Completions</h2>
  <p>The following words are known to be in  the list of completions (accessed through escape) that LaTeX knows about:</p>
      <ul>
          <li>corollary</li>
          <li>definition</li>
          <li>description</li>
          <li>enumerate</li>
          <li>equation</li>
          <li>itemize</li>
          <li>lemma</li>
          <li>proof</li>
          <li>proposition</li>
          <li>verbatim</li> 
      </ul>
  <h2>Templates</h2>

  <dl>
    <dt>Article</dt>

    <dd>Sets up a single file article document. Includes lots of
    nice packages for graphics, math, code listings, table of
    contents, etc.</dd>
    <dt>Exam</dt>

    <dd>Sets up a single file exam document.  If you write exams in LaTeX this is the template for you. Includes lots of nice packages for graphics, math, code listings, table of
    contents, etc.</dd>
  </dl>

  <h2>Environment Variables</h2>

  <ul>
    <li>TM_LATEX_MASTER: If set this variable contains the filename
    of a LaTeX file that includes other LaTeX files to create a
    larger work. If not set, this variable defaults to
    TM_FILEPATH</li>

    <li>TM_TSCOPE: If set this variable contains the path to the
    TeXniscope application. If not set it defaults to
    /Applications</li>

    <li>PDFTEX_FILE_LOCATION: The PDF LaTeX command currently needs to go through http to display the PDF inline. This is done by copying the file to a place where apache can find it and redirecting to that file using http://localhost/. It defaults to ~/Sites</li>

    <li>PDFTEX_WEB_LOCATION: This is how the generated PDF should be accessed (see PDFTEX_FILE_LOCATION). It defaults to http://localhost/~$USER</li>
    
    <li>TM_LATEX_ERRLVL</li>  Sets the error level of the latex command to check for.  If the error level is sufficiently low, then the html output window will be closed before the preview window is open.  If there are errors or warnings then the preview window stays around.  Some may want to have the preview window dissapear on warnings also, thus we have this variable.
    
    <li>TM_LATEX_COMPILER:  There are two main values for this command pdflatex or latexmk.pl.  pdflatex runs the normal pdflatex command against the current file, or TM_LATEX_MASTER sending the output of one pass to the html output window.  latexmk.pl  is essentially like ant (or make) for latex.  It will run pdflatex, bibtex, and/or makeindex as many times as needed to get a clean pdf file free from missing references, bibliography entries or index entries.</li>
    
    <li>TM_LATEX_VIEWER</li>
    Possible values for this are:  html (default), texniscope, preview.  See advanced notes on using Texniscope above.
  </ul>

  <li>TM_LATEX_INSERT_LABEL:  If you want the automatically generated begin/end environments to contain a label then you should set this to 1.</li>
  
  <h2>Related Commands</h2>

  <dl>
    <dt>Defaults</dt>

    <dd>The Defaults Bundle contains a set of commands called
    Special Items xxx. The Special Items commands help you navigate
    quickly through the sections subsections, etc of a LaTeX
    file.</dd>

    <dt>Uncomment [cmd-']</dt>

    <dd>The Uncomment bundle toggles line comments for a single
    line or selected lines of text. It supports LaTeX and many
    other environments</dd>
  </dl>

  <h2>Credits</h2>There were at least two or possibly three
  versions of a LaTeX bundle floating around in the early days of
  TextMate by (I think): Normand Mousseau, Gaetan Le Guelvouit and
  Andrew Ellis At some point, January 2005, Eric Hsu pulled
  together the threads into one package. From then on there have
  been contributions by Sune Foldager, Brad Miller, Alan Odgaard,
  and Jeroen van der Ham. The Generic Completion package was
  written by Marcin.

  <h2>TODO</h2>

  <ul>
    <li>Once the new Syntax and Scope system is in place it would
    be good to rethink some of the keyboard shortcuts.</li>
  </ul>
</body>
</html>
